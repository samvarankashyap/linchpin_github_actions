FROM centos:7
LABEL maintainer "https://github.com/CentOS-PaaS-SIG/linchpin"
LABEL description "This container will verify linchpin works under Centos7"

ENV HOME=/root
WORKDIR $HOME

RUN yum -y install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
RUN yum -y install python-pip \
    && pip install -U pip \
    && pip install -U setuptools \
    && pip install -U pygithub \
    && pip install -U openstackclient boto>=2.49.0 \
    && yum -y install curl \
    yum -y install gcc python-devel openssl-devel ansible \
                    libvirt-daemon-driver-* libvirt-daemon libvirt-daemon-kvm \
                    qemu-kvm libvirt-daemon-config-network libvirt-python \
                    libvirt-devel virt-install file openssh mkisofs \
                    libvirt-client net-tools git python-krbV make \
                    libxslt-python krb5-workstation \
                    python-requests jq buildah git which;
RUN mkdir -p $HOME/.config

# /wordir should include the source code of linchpin
CMD ["/usr/bin/tail"]
